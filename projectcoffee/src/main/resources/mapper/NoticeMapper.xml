<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.simplecoding.projectcoffee.notice.mapper.NoticeMapper">

    <select id="selectNoticeList" parameterType="com.simplecoding.projectcoffee.common.Criteria" resultType="com.simplecoding.projectcoffee.notice.vo.Notice">
        SELECT * FROM NOTICE
        WHERE 1=1
        <if test="searchKeyword != null and searchKeyword != ''">
            AND TITLE LIKE '%' || #{searchKeyword} || '%'
        </if>
        ORDER BY IMPORTANT DESC, C_DATE DESC
    </select>

    <select id="selectNotice" parameterType="int" resultType="com.simplecoding.projectcoffee.notice.vo.Notice">
        SELECT * FROM NOTICE WHERE NOTICE_ID = #{noticeId}
    </select>

    <update id="incrementViewCount" parameterType="int">
        UPDATE NOTICE
        SET VIEW_COUNT = VIEW_COUNT + 1
        WHERE NOTICE_ID = #{noticeId}
    </update>

    <insert id="insert" parameterType="com.simplecoding.projectcoffee.notice.vo.Notice">
        INSERT INTO NOTICE (NOTICE_ID, TITLE, CONT, IMPORTANT, C_DATE)
        VALUES (NOTICE_SEQ.NEXTVAL, #{title}, #{cont}, #{important}, SYSDATE)
    </insert>

</mapper>